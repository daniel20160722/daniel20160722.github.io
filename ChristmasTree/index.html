<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <meta charset="UTF-8">
    <title>聖誕樹</title>
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="./css/normalize.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <script>
        window.console = window.console || function (t) {};
    </script>
    <script>
        if (document.location.search.match(/type=embed/gi)) {
            window.parent.postMessage("resize", "*");
        }
    </script>
</head>

<body translate="no">
    <script src="./js/three.min.js"></script>
    <script src="./js/EffectComposer.js"></script>
    <script src="./js/RenderPass.js"></script>
    <script src="./js/ShaderPass.js"></script>
    <script src="./js/CopyShader.js"></script>
    <script src="./js/LuminosityHighPassShader.js"></script>
    <script src="./js/UnrealBloomPass.js"></script>

    <div id="overlay">
        <button class="btn" type="button">Merry Christmas</button>
    </div>

    <svg id="bg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
        y="0px" viewBox="0 0 750 1334" xml:space="preserve">
        <style type="text/css">
            .st0 {
                fill: #000000;
            }

            .st1 {
                opacity: 1.000000e-02;
                fill: #FFFDE9;
            }

            .st2 {
                opacity: 5.000000e-02;
                fill: #FFFDE9;
            }

            .st3 {
                opacity: 0.1;
                fill: #FFFDE9;
            }

            .st4 {
                fill: #FFFDE9;
            }

            .st5 {
                opacity: 0.1;
            }

            .st6 {
                fill: #3D6275;
            }

            .st7 {
                fill: #457582;
            }

            .st8 {
                fill: none;
                stroke: #FA1017;
                stroke-linecap: round;
                stroke-linejoin: round;
                stroke-miterlimit: 10;
            }

            .st9 {
                fill: #2887DB;
            }

            .st10 {
                opacity: 0.2;
            }

            .st11 {
                fill: none;
                stroke: #2887DB;
                stroke-miterlimit: 10;
            }

            .st12 {
                opacity: 5.000000e-02;
            }

            .st13 {
                opacity: 0.3;
                fill: #FFFDE9;
            }

            .st14 {
                fill: #D251DB;
            }

            .st15 {
                fill: none;
                stroke: #D251DB;
                stroke-miterlimit: 10;
            }

            .st16 {
                fill: #DBCF28;
            }

            .st17 {
                fill: none;
                stroke: #DBCF28;
                stroke-miterlimit: 10;
            }

            .st18 {
                fill: #88DB28;
            }

            .st19 {
                fill: none;
                stroke: #88DB28;
                stroke-miterlimit: 10;
            }

            .st20 {
                fill: #FB9E2A;
            }

            .st21 {
                opacity: 0.3;
                fill: #481F07;
            }

            .st22 {
                fill: #481F07;
            }

            .st23 {
                fill: #EAA906;
            }

            .st24 {
                fill: #82991F;
            }

            .st25 {
                fill: #FA1017;
            }

            .st26 {
                fill: #FF6F1F;
            }

            .st27 {
                fill: #DD9A26;
            }

            .st28 {
                fill: #DB6916;
            }

            .st29 {
                fill: #192E3B;
            }

            .st30 {
                fill: none;
            }
        </style>
        <g id="BACKGROUND">
            <rect x="0" y="0" class="st0" width="750" height="1334" />
        </g>
        <g id="OBJECTS">
            <ellipse transform="matrix(0.7071 -0.7071 0.7071 0.7071 -55.1087 328.0854)" class="st1" cx="368.5"
                cy="230.6" rx="230.6" ry="230.6" />
            <ellipse id="inner" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -55.1087 328.0854)" class="st2"
                cx="368.5" cy="230.6" rx="213.1" ry="213.1" />
            <ellipse transform="matrix(0.7071 -0.7071 0.7071 0.7071 -55.1087 328.0854)" class="st3" cx="368.5"
                cy="230.6" rx="193.4" ry="193.4" />
            <ellipse transform="matrix(0.7071 -0.7071 0.7071 0.7071 -56.1094 328.8269)" class="st4" cx="368.9"
                cy="232.1" rx="175.5" ry="175.5" />
            <g class="st5">
                <polygon class="st4" points="575.2,54.2 577.1,57.5 581,58.2 578.3,60.9 578.8,64.7 575.2,63.1 571.6,64.7 572.1,60.9 569.3,58.2 
			573.3,57.5" />
                <polygon class="st4" points="722.2,281.6 724.1,284.9 728,285.6 725.3,288.3 725.8,292.1 722.2,290.4 718.6,292.1 719.1,288.3 
			716.3,285.6 720.3,284.9" />
                <polygon class="st4" points="38.5,110.4 40.4,113.7 44.3,114.4 41.6,117.1 42.1,120.9 38.5,119.2 34.9,120.9 35.4,117.1 
			32.6,114.4 36.5,113.7" />
                <polygon class="st4" points="32.6,352.2 34.5,355.5 38.5,356.2 35.7,358.9 36.2,362.7 32.6,361.1 29,362.7 29.5,358.9 26.8,356.2 
			30.7,355.5" />
                <polygon class="st4" points="439.1,23 441,26.3 444.9,27 442.2,29.8 442.7,33.5 439.1,31.9 435.5,33.5 436,29.8 433.2,27 
			437.2,26.3" />
                <polygon class="st4" points="703.2,336.1 705.1,339.4 709,340.1 706.3,342.8 706.8,346.6 703.2,345 699.5,346.6 700.1,342.8 
			697.3,340.1 701.2,339.4" />
                <polygon class="st4" points="722.2,28.3 724.1,31.6 728,32.3 725.3,35 725.8,38.8 722.2,37.1 718.6,38.8 719.1,35 716.3,32.3 
			720.3,31.6" />
                <polygon class="st4" points="595.9,141.5 597.8,144.8 601.8,145.5 599,148.3 599.5,152 595.9,150.4 592.3,152 592.8,148.3 
			590,145.5 594,144.8" />
                <polygon class="st4" points="298,33.5 299.9,36.8 303.9,37.5 301.1,40.3 301.6,44 298,42.4 294.4,44 294.9,40.3 292.2,37.5 
			296.1,36.8" />
                <polygon class="st4" points="50.2,281.6 52.1,284.9 56,285.6 53.3,288.3 53.8,292.1 50.2,290.4 46.6,292.1 47.1,288.3 44.3,285.6 
			48.3,284.9" />
                <polygon class="st4" points="160.2,315.9 162.2,319.2 166.1,319.9 163.4,322.7 163.9,326.4 160.2,324.8 156.6,326.4 157.1,322.7 
			154.4,319.9 158.3,319.2" />
                <polygon class="st4" points="670.1,93.5 672,96.8 675.9,97.5 673.2,100.2 673.7,103.9 670.1,102.3 666.4,103.9 667,100.2 
			664.2,97.5 668.1,96.8" />
                <polygon class="st4" points="122.2,149.6 124.1,152.9 128,153.6 125.3,156.3 125.8,160.1 122.2,158.4 118.6,160.1 119.1,156.3 
			116.3,153.6 120.3,152.9" />
                <polygon class="st4" points="586.9,286.8 588.8,290.1 592.8,290.8 590,293.6 590.5,297.3 586.9,295.7 583.3,297.3 583.8,293.6 
			581,290.8 585,290.1" />
                <polygon class="st4" points="583.8,47.4 584.8,49.1 586.9,49.5 585.4,51 585.7,53 583.8,52.1 581.8,53 582.1,51 580.6,49.5 
			582.7,49.1" />
                <polygon class="st4" points="427.5,44.5 428.5,46.3 430.6,46.7 429.1,48.2 429.4,50.2 427.5,49.3 425.5,50.2 425.8,48.2 
			424.3,46.7 426.4,46.3" />
                <polygon class="st4" points="556,362.7 557.1,364.5 559.2,364.8 557.7,366.3 558,368.3 556,367.4 554.1,368.3 554.4,366.3 
			552.9,364.8 555,364.5" />
                <polygon class="st4" points="151.3,346.6 152.3,348.3 154.4,348.7 152.9,350.2 153.2,352.2 151.3,351.3 149.3,352.2 149.6,350.2 
			148.1,348.7 150.2,348.3" />
                <polygon class="st4" points="184.8,25.5 185.8,27.2 187.9,27.6 186.4,29.1 186.7,31.1 184.8,30.2 182.8,31.1 183.1,29.1 
			181.6,27.6 183.7,27.2" />
                <polygon class="st4" points="592.8,310.3 593.8,312.1 595.9,312.4 594.4,313.9 594.7,315.9 592.8,315.1 590.8,315.9 591.1,313.9 
			589.6,312.4 591.7,312.1" />
                <polygon class="st4" points="134.2,143.9 135.3,145.7 137.4,146.1 135.9,147.6 136.2,149.6 134.2,148.7 132.3,149.6 132.6,147.6 
			131.1,146.1 133.2,145.7" />
                <polygon class="st4" points="66,294.5 67,296.3 69.1,296.6 67.7,298.1 67.9,300.1 66,299.3 64,300.1 64.3,298.1 62.9,296.6 
			65,296.3" />
            </g>
            <path id="santa" class="st29" d="M551.2,194.6c-0.5-2.7-2.6,0.6-2.9,1.4c-2.7-0.8-5.1-2.3-7.1-4.3c-0.2-0.2-0.5-0.5-0.5-0.8
		c-0.1-0.3,0-0.6,0.1-0.9c0.4-1,0.9-2,1-3.1c0.1-1.1-0.4-2.3-1.4-2.7c-0.5-0.2-1-0.1-1.5,0c-0.2-0.2-0.4-0.5-0.6-0.7
		c-0.5-0.6-1-1.3-1.7-2c-0.2-0.2-0.3-0.3-0.5-0.5l3-3.4l0.2-0.3l-0.1-0.2l-1.4-6.4l0.2,6.2l-3.5,2.8c-0.5-0.4-1.1-0.7-1.7-1
		l-0.9-4.3l-0.8,3.5c-0.1,0-0.2-0.1-0.3-0.1l-1.2-0.4l-2.4-0.8l-0.1-2.6l2.5-3.5l0.1-0.1l0-0.1l0.3-6l-1.2,5.7l-3.2,3.2l-0.2,0.2
		l0,0.3l-0.2,2.1c-0.8-0.4-1.6-0.8-2.4-1.3c-0.1-0.1-0.2-0.1-0.3-0.2l0,0l0,0c-0.7-0.4-1.3-0.9-1.9-1.4l2.2-2.5l0.2-0.2l0-0.1
		l0.3-5.6l-1.4,5.2l-2.7,2c0,0-0.1,0-0.1-0.1c-1.1-1.1-1.8-2.5-2-4c-0.2-1.5,0.2-3.2,1-4.5c0.4-0.7,1-1.3,1.6-1.8
		c0.6-0.5,1.4-0.9,2.2-1.2c-0.8,0.3-1.6,0.5-2.4,1c-0.7,0.4-1.4,1-2,1.7c-1.1,1.4-1.7,3.2-1.6,5c0,0.9,0.2,1.8,0.6,2.7
		c0.3,0.8,0.9,1.6,1.5,2.3c0.6,0.7,1.2,1.3,1.9,2l-2.7,0.2l-3.9-3.2l3.4,4.1l0.1,0.1l0.3,0l5.5,0.7l0,0c1.1,0.7,2.3,1.3,3.5,1.8
		l-3.6,1.1l6.5,0.2l0-0.3l0.1,0l1.2,0.4c0.4,0.1,0.7,0.3,1.1,0.4c1.4,0.6,2.7,1.5,3.7,2.7c0.5,0.5,1,1.2,1.6,1.8
		c0.1,0.1,0.1,0.2,0.2,0.3c-0.1,0.1-0.2,0.1-0.3,0.2c-1.1-1.8-4.8-2.6-6.3-3c-0.2-0.1,0.2,2.5,0.3,2.7c0.3,0.9,0.9,1.8,1.6,2.5
		c0.2,0.2,0.6,0.5,0.9,0.7c-0.1,0-0.1,0.1-0.2,0.1c-1,0.6-2.2,1.2-2.6,2.3c-0.4,1.1,0.1,2.4,0.9,3.2c0.5,0.5,1.1,0.9,1.8,1.2
		c-0.2,0.3-0.3,0.6-0.4,0.9c-1.3,2.8-2.2,5.8-4,8.4c-1.5,2.2-2.9,4.7-6,5.1c-1.7,0.3-3.5,0-5.3-0.4c-2-0.4-4.1-0.9-6-1.6
		c-2.9-0.9-5.8-2-8.8-1.8c-1,0.1-2,0.3-3,0.6c-0.1-0.3-0.3-0.6-0.6-0.9c-0.7-0.6-1.6-0.9-2.4-1.3c-1.6-0.9-2.7-2.7-2.9-4.5
		c-0.7,1.5-0.6,3.4,0.4,4.7c-2-0.9-3.5-2.8-3.9-4.9c-0.7,1.9-0.6,4,0.2,5.8c-6.5-2.7-11.9-5.7-16.2-8.5c0-0.3,0.1-0.5,0.1-0.7
		c0.4-3.1,0.8-6.6-0.2-9.6c0-0.1,0-0.1-0.1-0.2c-0.4-2.1-6.7-4.4-7.9-5c-0.6-0.3-1.2-0.5-1.8-0.7c-0.1-1.8-0.5-3.6-1.1-5.3
		c-1.2-3.4-2.6-8.2-3.6-12.2c1.2,0.2,2.3,0.5,3.6,0.7c2.6,0.5,5.6,0.4,7.4-1.6c0.7-0.7,1.1-1.6,1.4-2.5c0.3-0.8,0.5-1.6,0.1-2.3
		c-1.2-2.5-2.3,1.3-2.5,2.1c-2.8-0.1-5.6-0.9-8-2.4c-0.3-0.2-0.6-0.4-0.7-0.7c-0.1-0.3-0.1-0.6-0.1-0.9c0.1-1.1,0.3-2.2,0.1-3.3
		c-0.2-1.1-1-2.2-2.1-2.3c-0.5,0-1,0.1-1.4,0.4c-0.2-0.2-0.5-0.4-0.7-0.5c-0.7-0.5-1.3-1-2.1-1.5c-0.2-0.1-0.4-0.2-0.6-0.3l2-4.1
		l0.2-0.3l-0.1-0.2l-3-5.8l1.8,5.9l-2.7,3.6c-0.6-0.2-1.3-0.4-1.9-0.5l-1.9-3.9l0.1,3.6c-0.1,0-0.2,0-0.3,0l-1.3-0.1l-2.5-0.1
		l-0.8-2.4l1.5-4l0.1-0.2l0-0.1l-1.2-5.9l0.3,5.8l-2.2,3.9l-0.1,0.2l0.1,0.3l0.3,2c-0.9-0.1-1.8-0.3-2.6-0.6c-0.1,0-0.2-0.1-0.3-0.1
		l0,0l0,0c-0.7-0.2-1.5-0.5-2.2-0.8l1.4-3l0.1-0.2l0-0.1l-1.2-5.5l0,5.4l-2.1,2.6c0,0-0.1,0-0.1-0.1c-1.4-0.7-2.4-1.9-3-3.4
		c-0.6-1.4-0.7-3.1-0.2-4.7c0.2-0.8,0.6-1.5,1.1-2.2c0.5-0.7,1.2-1.2,1.8-1.8c-0.7,0.5-1.4,0.9-2,1.5c-0.6,0.6-1.1,1.3-1.5,2.2
		c-0.7,1.6-0.8,3.5-0.3,5.2c0.3,0.9,0.7,1.7,1.2,2.4c0.5,0.7,1.3,1.4,2,1.8c0.8,0.5,1.5,1,2.4,1.4l-2.6,0.9l-4.6-2.1l4.3,3.1
		l0.1,0.1l0.3,0l5.5-0.7l0,0c1.3,0.4,2.6,0.7,3.9,0.8l-3.2,2l6.3-1.5l-0.1-0.2l0.1,0l1.3,0.1c0.4,0,0.8,0.1,1.2,0.1
		c1.5,0.3,3,0.8,4.3,1.6c0.6,0.4,1.3,0.9,2,1.4c0.1,0.1,0.2,0.1,0.3,0.2c-0.1,0.1-0.2,0.2-0.2,0.3c-1.5-1.5-5.3-1.2-6.9-1.3
		c-0.2,0,0.8,2.4,0.9,2.5c0.5,0.8,1.3,1.5,2.2,2c0.3,0.2,0.7,0.3,1,0.4c-0.1,0.1-0.1,0.1-0.2,0.2c-0.9,0.8-1.8,1.7-1.9,2.9
		c-0.1,1.2,0.7,2.3,1.7,2.9c0.6,0.4,1.3,0.6,2,0.7c-0.1,0.3-0.1,0.7-0.2,1c-0.5,3-0.6,6.2-1.7,9.1c-0.9,2.5-1.6,5.3-4.4,6.5
		c-1.6,0.7-3.4,0.9-5.2,1c-2.1,0.1-4.2,0.1-6.2,0.1c-3-0.1-6.1-0.4-8.9,0.5c-1,0.3-1.9,0.8-2.7,1.4c-0.2-0.3-0.5-0.5-0.9-0.7
		c-0.8-0.4-1.8-0.4-2.7-0.7c-1.8-0.5-3.3-1.9-4-3.6c-0.3,1.6,0.3,3.4,1.6,4.5c-2.1-0.3-4.1-1.8-5-3.7c-0.3,3.4,1.8,6.9,4.9,8.2
		c0.8,0.4,1.7,0.6,2.6,0.5c-0.1,0.3-0.2,0.7-0.3,1.1c-15.6,2.9-32.3,9.7-40.2,13.1c-0.9-2.8-1.8-6-2.5-8.8c1.2,0.2,2.3,0.5,3.6,0.7
		c2.6,0.5,5.6,0.4,7.4-1.6c0.7-0.7,1.1-1.6,1.4-2.5c0.3-0.8,0.5-1.6,0.1-2.3c-1.2-2.5-2.3,1.3-2.5,2.1c-2.8-0.1-5.6-0.9-8-2.4
		c-0.3-0.2-0.6-0.4-0.7-0.7c-0.1-0.3-0.1-0.6-0.1-0.9c0.1-1.1,0.3-2.2,0.1-3.3c-0.2-1.1-1-2.2-2.1-2.3c-0.5,0-1,0.1-1.4,0.4
		c-0.2-0.2-0.5-0.4-0.7-0.5c-0.7-0.5-1.3-1-2.1-1.5c-0.2-0.1-0.4-0.2-0.6-0.3l2-4.1l0.2-0.3l-0.1-0.2l-3-5.8l1.8,5.9l-2.7,3.6
		c-0.6-0.2-1.3-0.4-1.9-0.5l-1.9-3.9l0.1,3.6c-0.1,0-0.2,0-0.3,0l-1.3-0.1l-2.5-0.1l-0.8-2.4l1.5-4l0.1-0.2l0-0.1l-1.2-5.9l0.3,5.8
		l-2.2,3.9l-0.1,0.2l0.1,0.3l0.3,2c-0.9-0.1-1.8-0.3-2.6-0.6c-0.1,0-0.2-0.1-0.3-0.1l0,0l0,0c-0.7-0.2-1.5-0.5-2.2-0.8l1.4-3
		l0.1-0.2l0-0.1l-1.2-5.5l0,5.4l-2.1,2.6c0,0-0.1,0-0.1-0.1c-1.4-0.7-2.4-1.9-3-3.4c-0.6-1.4-0.7-3.1-0.2-4.7
		c0.2-0.8,0.6-1.5,1.1-2.2c0.5-0.7,1.2-1.2,1.8-1.8c-0.7,0.5-1.4,0.9-2,1.5c-0.6,0.6-1.1,1.3-1.5,2.2c-0.7,1.6-0.8,3.5-0.3,5.2
		c0.3,0.9,0.7,1.7,1.2,2.4c0.5,0.7,1.3,1.4,2,1.8c0.8,0.5,1.5,1,2.4,1.4l-2.6,0.9l-4.6-2.1l4.3,3.1l0.1,0.1l0.3,0l5.5-0.7l0,0
		c1.3,0.4,2.6,0.7,3.9,0.8l-3.2,2l6.3-1.5l-0.1-0.2l0.1,0l1.3,0.1c0.4,0,0.8,0.1,1.2,0.1c1.5,0.3,3,0.8,4.3,1.6
		c0.6,0.4,1.3,0.9,2,1.4c0.1,0.1,0.2,0.1,0.3,0.2c-0.1,0.1-0.2,0.2-0.2,0.3c-1.5-1.5-5.3-1.2-6.9-1.3c-0.2,0,0.8,2.4,0.9,2.5
		c0.5,0.8,1.3,1.5,2.2,2c0.3,0.2,0.7,0.3,1,0.4c-0.1,0.1-0.1,0.1-0.2,0.2c-0.9,0.8-1.8,1.7-1.9,2.9c-0.1,1.2,0.7,2.3,1.7,2.9
		c0.6,0.4,1.3,0.6,2,0.7c-0.1,0.3-0.1,0.7-0.2,1c-0.5,3-0.6,6.2-1.7,9.1c-0.9,2.5-1.6,5.3-4.4,6.5c-1.6,0.7-3.4,0.9-5.2,1
		c-2.1,0.1-4.2,0.1-6.2,0.1c-3-0.1-6.1-0.4-8.9,0.5c-1,0.3-1.9,0.8-2.7,1.4c-0.2-0.3-0.5-0.5-0.9-0.7c-0.8-0.4-1.8-0.4-2.7-0.7
		c-1.8-0.5-3.3-1.9-4-3.6c-0.3,1.6,0.3,3.4,1.6,4.5c-2.1-0.3-4.1-1.8-5-3.7c-0.2,2.5,0.9,5.1,2.7,6.8c-19.7-2.3-35.8-9.2-46-14.7
		c2.6-3,1.2-14-8.4-12.9c-10.4,1.2-8.3,13.2-7.8,18.6c0,0.1,0,0.1,0,0.2c0.3,3.1-0.9,6-2.9,8.1c0,0,0,0,0,0
		c0.9-4.8-3.3-17.2-10.7-19.5c-2.5-0.8-4.4-2.6-5.9-4.6c3.8-1,6.9-3.1,7.7-3.5c1.5-0.8,0.7-2.8,0.7-2.8c1.1-1.2-1-3.9-1-3.9
		c0.7-1.4-1.2-2.4-1.2-2.4c-1-3-4.5-2.3-4.5-2.3s0.2-0.6,1.2-1.6c1-1,0.3-2.7-2.4-3.8c-2.7-1-3.1-2.8-3.1-2.8c0.9-0.8,0.2-1,0.2-1
		c0.8-0.9-0.1-1.1-0.1-1.1c0.5-1-0.9-1.6-0.9-1.6c0.1-1-0.5-1.2-0.5-1.2c-0.4-0.7-2-0.8-2-0.8c-0.2-0.8-1.3-0.6-1.3-0.6
		c-10.1-2.1-13.3,1.2-14.2,2c-0.9,0.8-3,1.8-3,1.8s-0.5-0.7-1.2-0.4c-0.7,0.3-0.9,1.1-0.9,1.1s-0.6-1-1.6,0c-1,1,0,1.6,0,1.6
		s-0.4,0.6-0.4,1.5c0,0.9,1,0.9,1,0.9s-0.9,0.4,0,1.2c0.9,0.8,1.3,0.3,1.3,0.3s-0.2,0.9,0.8,1c0.7,0.1,1.1-0.3,1.2-0.5
		c-0.1,0.1,0,0.4,1,0.5c1.5,0.1,1.4-0.6,1.4-0.6c1.2-0.6,1-1.7,1-1.7c0.9-0.1,0.6-1.5,0.6-1.5c0.5-1-0.6-1.8-0.6-1.8s2.3,0,2.7,1.9
		c0.4,1.9-0.1,2.9-0.7,3.3c-0.6,0.4,0,1.5,0,1.5c0.1,1.2,1,1.3,1,1.3c0.1,1.2,0.8,0.9,0.8,0.9c0.5,1,1.5,0.8,1.5,0.8
		c0.1,0.2,0.2,0.3,0.4,0.3c-2,1.6-4.9,4.6-7.7,9.6l-1.5-7.3l2.3-0.7l-1.5-4.8l-13,3.8c-0.6-0.8-1.3-1.5-2.2-2.1l5,1.2l4.5-16.4
		l2.7,0.7l1.3-6.8l-23.4-5.9l-2.1,5.9l1.5,0.4l-5.3,16.9l9.3,2.3c-2.2,0.3-4.2,1.3-5.6,2.8l-5.5,1l-3.2-13.3l1.8-0.5l-2-6.7
		l-22.9,7.5l0.8,5.9l1.7-0.5l2.7,12.4c-1.2,0.5-2.5,1.4-3.8,3.1c-2.7,3.4-0.9,7.2,1,9.8c-1.6,1.3-3.1,3.4-4.1,6.4
		c-3.8,12,0.6,16.7,7.5,13.9c2.4-1,2.9-3.1,3-5.5c0.5,0.5,1.1,0.9,1.7,1.2c2.3,1.1,4.7,3.5,6.2,8.3c0.7,2.3,1.3,4.7,1.8,7.1
		c1.9,8.5,7.9,15.2,15.5,18.2l1.1,9.9c-2.2,0.3-3.4,0.4-3.4,0.4s-2.9,0-3.9,4.5l93.1-11.9c0,0,9.5,0,8.6-8.6c0,0-1.5,4-9.4,5
		c-0.3,0-0.8,0.1-1.3,0.2l-1-9c2.7-2.9,3.9-7.1,2.7-11.2c-1-3.2-2.6-6.7-5.4-10.3c-3.5-4.6-5.6-8.5-6.6-11.6
		c9.1,5.9,31,18.1,60.3,19.8c-0.3,1-0.5,1.9-0.7,2.7c-0.8,2.9-3.1,4.8-4.3,5.7c-1.2,0.9-4.2,1-4.2,1s-2.1,4.9-4.8,9
		c-2.7,4.1-4.1,2.5-4.1,2.5c-1.3,0.5-2,3.3-2,3.3c6,1.8,12.2-12.5,12.2-12.5s1.2,0.2,4.1-0.4c-0.2,1.2-1,5.6-2.4,9.6
		c-1.6,4.6-3.4,3.4-3.4,3.4c-1.2,0.8-1.1,3.6-1.1,3.6c6.2,0.3,8.9-15.1,8.9-15.1s2.6-0.2,9.4-4.3c0.3-0.2,0.6-0.4,1-0.6
		c3.8,0.9,8.3,0.8,11.8,0.6c5.9-0.3,13.4-1.1,17.4-5.5c0,0,0.1-0.1,0.1-0.1c2.9-0.1,6,1.4,7.7,3.8c-0.4,0.8-0.9,1.6-1.2,2.1
		c-0.8,1.6-1.8,3.2-2.8,4.8c-2.7,4.1-4.1,2.5-4.1,2.5c-1.3,0.5-2,3.3-2,3.3c3.2,0.9,6.1-2.5,7.7-4.7c1.9-2.5,3.9-5.3,4.5-8.4
		c0-0.1,0-0.1,0-0.2c0.7-2-3.6-7.1-4.4-8.3c0,0,0-0.1-0.1-0.1c2.5-1.3,5.7-1.5,8.2-0.3c0,0.9,0,1.8,0,2.5c0.1,1.8,0.1,3.7-0.1,5.5
		c-0.3,4.9-2.3,4.2-2.3,4.2c-0.9,1.1-0.1,3.8-0.1,3.8c3.3-0.8,4-5.1,4.4-7.9c0.4-3.1,0.8-6.6-0.2-9.6c0-0.1,0-0.1-0.1-0.2
		c-0.4-2.1-6.7-4.4-7.9-5c-0.6-0.3-1.2-0.5-1.8-0.7c0-0.7-0.1-1.4-0.3-2.1c7.3-3.2,22.2-9.2,36.7-12.4c-1,2-2.7,3.5-3.7,4.2
		c-1.2,0.9-4.2,1-4.2,1s-2.1,4.9-4.8,9c-2.7,4.1-4.1,2.5-4.1,2.5c-1.3,0.5-2,3.3-2,3.3c6,1.8,12.2-12.5,12.2-12.5s1.2,0.2,4.1-0.4
		c-0.2,1.2-1,5.6-2.4,9.6c-1.6,4.6-3.4,3.4-3.4,3.4c-1.2,0.8-1.1,3.6-1.1,3.6c6.2,0.3,8.9-15.1,8.9-15.1s2.6-0.2,9.4-4.3
		c0.3-0.2,0.6-0.4,1-0.6c3.8,0.9,8.3,0.8,11.8,0.6c5.9-0.3,13.4-1.1,17.4-5.5c0,0,0.1-0.1,0.1-0.1c0.1,0,0.2,0,0.3,0
		c1.6,1.5,3.8,3.3,6.5,5.3c-0.1,0.3-0.3,0.5-0.4,0.7c-0.8,1.6-1.8,3.2-2.8,4.8c-2.7,4.1-4.1,2.5-4.1,2.5c-1.3,0.5-2,3.3-2,3.3
		c3.2,0.9,6.1-2.5,7.7-4.7c1.2-1.6,2.5-3.3,3.4-5.2c0.7,0.5,1.3,0.9,2.1,1.4c-0.1,1.2,0.3,2.6,0.3,2.6c0.8-0.2,1.4-0.6,2-1.1
		c5.4,3.3,12.7,7.1,22,10.4c0,0.1-0.1,0.3-0.1,0.4c-0.5,0.9-1,1.9-1.5,2.6c-1.5,2.5-4.2,3.8-5.6,4.4c-1.4,0.5-4.3-0.2-4.3-0.2
		s-3.3,4.2-6.9,7.5c-3.7,3.2-4.6,1.3-4.6,1.3c-1.4,0.1-2.8,2.6-2.8,2.6c5.3,3.3,15-8.9,15-8.9s1.1,0.5,4.1,0.7
		c-0.5,1.1-2.4,5.2-4.8,8.6c-2.8,4-4.1,2.4-4.1,2.4c-1.4,0.5-2.1,3.2-2.1,3.2c6,1.9,12.5-12.2,12.5-12.2s2.6,0.5,10.2-1.7
		c0.4-0.1,0.7-0.2,1.1-0.3c3.5,1.8,7.8,2.9,11.2,3.6c5.8,1.2,13.2,2.4,18.3-0.8c0.1,0,0.1-0.1,0.1-0.1c2.8,0.7,5.5,2.9,6.4,5.7
		c-0.6,0.7-1.3,1.3-1.7,1.8c-1.2,1.4-2.5,2.7-3.9,3.9c-3.7,3.2-4.6,1.3-4.6,1.3c-1.4,0.1-2.8,2.6-2.8,2.6c2.8,1.7,6.5-0.8,8.7-2.5
		c2.5-1.9,5.2-4.1,6.6-7c0-0.1,0-0.1,0.1-0.2c1.1-1.8-1.6-7.8-2.1-9.1c0,0,0-0.1,0-0.1c2.7-0.6,5.9,0,8,1.9
		c-0.2,0.9-0.5,1.8-0.6,2.4c-0.4,1.8-0.9,3.6-1.5,5.3c-1.6,4.6-3.3,3.4-3.3,3.4c-1.2,0.8-1.1,3.7-1.1,3.7c3.3,0.1,5.2-3.9,6.3-6.5
		c1.2-2.9,2.4-6.1,2.2-9.3c0-0.1,0-0.1,0-0.2c0.1-2.1-5.3-6-6.4-6.9c-0.5-0.4-1.1-0.8-1.6-1.2c0.4-1.8,0.5-3.6,0.3-5.4
		c-0.3-3.6-0.4-8.6-0.4-12.7c1.1,0.5,2.1,1.1,3.3,1.6c2.4,1.1,5.3,1.8,7.6,0.4c0.8-0.5,1.5-1.3,2.1-2.1
		C550.9,196.2,551.3,195.4,551.2,194.6z M281.2,191.5c1.9,0.3,2.8,2.4,3.7,4.3c-2.5-1.5-4.4-2.7-5.7-3.6
		C279.7,191.6,280.4,191.4,281.2,191.5z M277.4,240.9c1.3,0.7,3,0.4,4-0.7c0.4-0.4,0.3-1-0.1-1.4c-0.4-0.4-1-0.4-1.4,0.1
		c-0.4,0.4-1.1,0.5-1.6,0.2c-0.6-0.3-1-0.9-1-1.6c0-0.3,0-0.6,0.1-0.8c0-0.1,0.1-0.1,0.1-0.1l3.3-0.4c0.9,0.5,1.6,1.4,1.7,2.5
		c0.2,1.5-1,3.1-2.5,3.4c-2.1,0.4-4.2-1.5-4.9-2.3c-0.2-0.2-0.3-0.4-0.5-0.5c-0.6-0.7-1.4-1.5-2.3-2l3.1-0.4c0,0.3-0.1,0.5,0,0.8
		C275.4,239,276.2,240.3,277.4,240.9z M249.7,246.4c-0.1-0.1-0.2-0.2-0.3-0.2c-0.7-0.4-1.4-0.8-1.9-1.4c-0.5-0.5-0.7-1.1-0.5-1.6
		c0.2-0.8,1.2-1.3,1.7-1.5c0.6-0.2,1.9-0.6,3-0.1c0.9,0.3,1.5,1.1,2.3,1.9c0.2,0.2,0.3,0.4,0.5,0.6c0.4,0.5,1,1,1.7,1.5
		C254,245.8,251.8,246.1,249.7,246.4z M229.7,248.8c-0.6-0.3-1.1-0.7-1.5-1.1c-0.5-0.5-0.7-1.1-0.5-1.6c0.2-0.8,1.2-1.3,1.7-1.5
		c0.6-0.2,1.9-0.6,3-0.1c0.9,0.3,1.5,1.1,2.3,1.9c0.2,0.2,0.3,0.4,0.5,0.6c0.3,0.3,0.7,0.7,1.1,1.1
		C234,248.3,231.8,248.6,229.7,248.8z M209.8,251.3c-0.3-0.2-0.5-0.4-0.8-0.7c-0.5-0.5-0.7-1.1-0.5-1.6c0.2-0.8,1.2-1.3,1.7-1.5
		c0.6-0.2,1.9-0.6,3-0.1c0.9,0.3,1.5,1.1,2.3,1.9c0.2,0.2,0.3,0.4,0.5,0.6c0.2,0.2,0.3,0.4,0.5,0.6
		C214,250.8,211.7,251.1,209.8,251.3z M222.8,249.7c0.4-0.2,0.7-0.4,1-0.7c0.4-0.4,0.3-1-0.1-1.4c-0.4-0.4-1-0.4-1.4,0.1
		c-0.4,0.4-1.1,0.5-1.6,0.2c-0.6-0.3-1-0.9-1-1.6c0-0.3,0-0.6,0.1-0.8c0.3-0.7,1.2-1,1.9-0.9c1.5,0,3,1.4,3.1,2.9
		c0.1,0.7-0.2,1.5-0.6,2.1C223.7,249.6,223.2,249.6,222.8,249.7z M264.4,239.1c-0.2-0.4-0.5-0.7-0.8-1l1.7-0.2
		C264.9,238.3,264.6,238.7,264.4,239.1z M258.2,243.8c1.3,0.7,3,0.4,4-0.7c0.4-0.4,0.3-1-0.1-1.4c-0.4-0.4-1-0.3-1.4,0.1
		c-0.4,0.4-1.1,0.5-1.6,0.2c-0.6-0.3-1-0.9-1-1.6c0-0.3,0-0.6,0.1-0.8c0.3-0.7,1.2-1,1.9-0.9c1.5,0,3,1.4,3.1,2.9
		c0.2,1.5-1,3.1-2.5,3.4c-2.1,0.4-4.2-1.5-4.9-2.3c-0.2-0.2-0.3-0.4-0.5-0.5c-0.8-0.9-1.7-1.9-3-2.4c-0.2-0.1-0.4-0.1-0.6-0.2
		l4.6-0.5c-0.2,0.5-0.3,1-0.2,1.6C256.2,241.9,257,243.2,258.2,243.8z M245.2,242.1c-0.4-0.6-1-1.2-1.6-1.6l3.8-0.4
		C246.3,240.5,245.6,241.2,245.2,242.1z M226.6,248.9c0,0,0.1,0.1,0.1,0.1c0.1,0.1,0.1,0.1,0.2,0.2c-0.1,0-0.2,0-0.3,0
		C226.6,249.1,226.6,249,226.6,248.9z M239.4,247.6c-1.3-0.5-2.3-1.5-2.8-2c-0.2-0.2-0.3-0.4-0.5-0.5c-0.8-0.9-1.7-1.9-3-2.4
		c-1.3-0.5-2.9-0.5-4.5,0.1c-1.3,0.5-2.2,1.3-2.7,2.3c-0.7-1-1.7-1.8-2.8-2.2l14.4-1.7c-0.1,0.2-0.2,0.4-0.3,0.6
		c-0.2,0.5-0.3,1.1-0.3,1.7c0.1,1.4,0.9,2.7,2.1,3.2c1.3,0.7,3,0.4,4-0.7c0.4-0.4,0.3-1-0.1-1.4c-0.4-0.4-1-0.3-1.4,0.1
		c-0.4,0.4-1.1,0.5-1.6,0.2c-0.6-0.3-1-0.9-1-1.6c0-0.3,0-0.6,0.1-0.8c0.3-0.7,1.2-1,1.9-0.9c1.5,0,3,1.4,3.1,2.9
		c0.1,1-0.4,2.1-1.2,2.7C241.7,247.4,240.6,247.5,239.4,247.6z M245.9,246c0,0,0.1,0.1,0.1,0.1c0.2,0.3,0.5,0.5,0.7,0.7
		c-0.4,0-0.7,0.1-1.1,0.1C245.7,246.6,245.8,246.3,245.9,246z M265.1,243c0,0,0.1,0.1,0.1,0.1c0.4,0.5,0.9,0.8,1.4,1.2
		c-0.7,0.1-1.4,0.2-2.1,0.3C264.7,244.1,264.9,243.6,265.1,243z M268.6,243.2c-0.7-0.4-1.4-0.8-1.9-1.4c-0.5-0.5-0.7-1.1-0.5-1.6
		c0.2-0.8,1.2-1.3,1.7-1.5c0.6-0.2,1.9-0.6,3-0.1c0.9,0.3,1.5,1.1,2.3,1.9c0.2,0.2,0.3,0.4,0.5,0.6c0.6,0.6,1.4,1.4,2.5,2
		c-2.2,0.3-4.5,0.6-6.9,0.9C269.1,243.7,268.9,243.4,268.6,243.2z M217.1,243.5l2.1-0.2c-0.5,0.3-0.9,0.8-1.2,1.4
		c-0.2,0.5-0.3,1.1-0.3,1.7c0.1,1.4,0.9,2.7,2.1,3.2c0.3,0.1,0.6,0.2,0.9,0.3c-0.5,0.1-0.9,0.1-1.4,0.2c-0.8-0.5-1.5-1.2-1.9-1.6
		c-0.2-0.2-0.3-0.4-0.5-0.5c-0.8-0.9-1.7-1.9-3-2.4c-1.3-0.5-2.9-0.5-4.5,0.1c-0.7,0.3-1.3,0.6-1.8,1.1l-0.4-4.1
		C210.3,243.6,213.7,243.9,217.1,243.5z M286.4,234.3l0.8,7.5c-1.1,0.1-2.5,0.3-4,0.5c0.9-1.1,1.4-2.4,1.3-3.8
		c-0.1-1-0.5-1.9-1.2-2.7C284.4,235.4,285.4,234.9,286.4,234.3z M278.4,194.1c7.2,4.9,30.4,19,61.4,21.3c-0.2,0.6-0.3,1.1-0.3,1.7
		c-31-1.8-53.6-15.5-61-20.6C278.3,195.5,278.3,194.7,278.4,194.1z M381.6,203.7c-0.2-0.5-0.3-1-0.5-1.5c7.7-3.4,24.1-10,39.4-13
		c0,0.3,0,0.6,0.1,0.9c-0.2,0.8-0.4,1.5-0.6,2.2c-14.8,3.1-30.3,9.3-38,12.6C381.9,204.6,381.7,204.2,381.6,203.7z M492.1,208.1
		c0.1,0.1,0.2,0.2,0.3,0.3c0.7,0.6,1.5,1,2.4,1.2c-0.3,0.5-0.6,1-0.8,1.5c-8.7-3.1-15.8-6.7-21.4-10.2c0.3-0.7,0.6-1.4,0.8-2.2
		C478,201.7,484.3,205,492.1,208.1z M471.9,187.7c0,0.9,0,1.8,0,2.5c0.1,1.7,0.1,3.4,0,5.1c-2.3-1.5-4.2-3-5.9-4.3
		c-0.9-1.3-1.9-2.5-2.2-3c0,0,0-0.1-0.1-0.1C466.2,186.7,469.4,186.5,471.9,187.7z M463.5,194.6c0.5,0.3,1,0.7,1.4,1.1
		C464.4,195.3,464,195,463.5,194.6z M468.2,196.5c0-0.1,0-0.1,0-0.2c0.1-0.3,0.1-0.7,0-1.1c1,0.8,2.2,1.5,3.4,2.3
		c-0.3,1.2-0.7,1.8-1.1,2c-0.9-0.6-1.9-1.2-2.7-1.8C468,197.4,468.1,196.9,468.2,196.5z" />
        </g>
    </svg>
    <script id="rendered-js">
        const {
            PI,
            sin,
            cos
        } = Math;
        const TAU = 2 * PI;

        const map = (value, sMin, sMax, dMin, dMax) => {
            return dMin + (value - sMin) / (sMax - sMin) * (dMax - dMin);
        };

        const range = (n, m = 0) =>
            Array(n).
        fill(m).
        map((i, j) => i + j);

        const rand = (max, min = 0) => min + Math.random() * (max - min);
        const randInt = (max, min = 0) => Math.floor(min + Math.random() * (max - min));
        const randChoise = arr => arr[randInt(arr.length)];
        const polar = (ang, r = 1) => [r * cos(ang), r * sin(ang)];

        let scene, camera, renderer, analyser;
        let step = 0;
        const uniforms = {
            time: {
                type: "f",
                value: 0.0
            },
            step: {
                type: "f",
                value: 0.0
            }
        };

        const params = {
            exposure: 1,
            bloomStrength: 0.9,
            bloomThreshold: 0,
            bloomRadius: 0.5
        };

        let composer;

        const fftSize = 2048;
        const totalPoints = 4000;

        const listener = new THREE.AudioListener();

        const audio = new THREE.Audio(listener);

        const buttons = document.querySelectorAll(".btn");
        buttons.forEach((button) =>
            button.addEventListener("click", () => loadAudio()));

        function init() {
            const overlay = document.getElementById("overlay");
            overlay.remove();

            scene = new THREE.Scene();
            renderer = new THREE.WebGLRenderer({
                antialias: true,
                alpha: true
            });
            renderer.setClearColor(0xff0000, 0);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            camera = new THREE.PerspectiveCamera(
                60,
                window.innerWidth / window.innerHeight,
                1,
                1000);

            camera.position.set(-0.09397456774197047, -2.5597086635726947, 24.420789670889008);
            camera.rotation.set(0.10443543723052419, -0.003827152981119352, 0.0004011488708739715);

            const format = renderer.capabilities.isWebGL2 ?
                THREE.RedFormat :
                THREE.LuminanceFormat;

            uniforms.tAudioData = {
                value: new THREE.DataTexture(analyser.data, fftSize / 2, 1, format)
            };


            addPlane(scene, uniforms, 3000);
            addSnow(scene, uniforms);
            addTree(scene, uniforms, totalPoints, [0, -5, -10]);

            const renderScene = new THREE.RenderPass(scene, camera);

            const bloomPass = new THREE.UnrealBloomPass(
                new THREE.Vector2(window.innerWidth, window.innerHeight),
                1.5,
                0.4,
                0.85);

            bloomPass.threshold = params.bloomThreshold;
            bloomPass.strength = params.bloomStrength;
            bloomPass.radius = params.bloomRadius;

            composer = new THREE.EffectComposer(renderer);
            composer.addPass(renderScene);
            composer.addPass(bloomPass);

            addListners(camera, renderer, composer);
            animate();
        }

        function animate(time) {
            analyser.getFrequencyData();
            uniforms.tAudioData.value.needsUpdate = true;
            step = (step + 1) % 1000;
            uniforms.time.value = time;
            uniforms.step.value = step;
            composer.render();
            requestAnimationFrame(animate);
        }

        function loadAudio() {
            const file =
                "/Scott Holmes Music - Jingle Bells.mp3";

            const loader = new THREE.AudioLoader();
            loader.load(file, function (buffer) {
                audio.setBuffer(buffer);
                audio.play();
                analyser = new THREE.AudioAnalyser(audio, fftSize);
                init();
            });
        }

        function addTree(scene, uniforms, totalPoints, treePosition) {
            const vertexShader = `
      attribute float mIndex;
      varying vec3 vColor;
      varying float opacity;
      uniform sampler2D tAudioData;
      float norm(float value, float min, float max ){
       return (value - min) / (max - min);
      }
      float lerp(float norm, float min, float max){
       return (max - min) * norm + min;
      }
      float map(float value, float sourceMin, float sourceMax, float destMin, float destMax){
       return lerp(norm(value, sourceMin, sourceMax), destMin, destMax);
      }
      void main() {
       vColor = color;
       vec3 p = position;
       vec4 mvPosition = modelViewMatrix * vec4( p, 1.0 );
       float amplitude = texture2D( tAudioData, vec2( mIndex, 0.1 ) ).r;
       float amplitudeClamped = clamp(amplitude-0.4,0.0, 0.6 );
       float sizeMapped = map(amplitudeClamped, 0.0, 0.6, 1.0, 20.0);
       opacity = map(mvPosition.z , -200.0, 15.0, 0.0, 1.0);
       gl_PointSize = sizeMapped * ( 100.0 / -mvPosition.z );
       gl_Position = projectionMatrix * mvPosition;
      }
      `;
            const fragmentShader = `
      varying vec3 vColor;
      varying float opacity;
      uniform sampler2D pointTexture;
      void main() {
       gl_FragColor = vec4( vColor, opacity );
       gl_FragColor = gl_FragColor * texture2D( pointTexture, gl_PointCoord ); 
      }
      `;
            const shaderMaterial = new THREE.ShaderMaterial({
                uniforms: {
                    ...uniforms,
                    pointTexture: {
                        value: new THREE.TextureLoader().load(`./images/spark1.png`)
                    }
                },


                vertexShader,
                fragmentShader,
                blending: THREE.AdditiveBlending,
                depthTest: false,
                transparent: true,
                vertexColors: true
            });


            const geometry = new THREE.BufferGeometry();
            const positions = [];
            const colors = [];
            const sizes = [];
            const phases = [];
            const mIndexs = [];

            const color = new THREE.Color();

            for (let i = 0; i < totalPoints; i++) {
                const t = Math.random();
                const y = map(t, 0, 1, -8, 10);
                const ang = map(t, 0, 1, 0, 6 * TAU) + TAU / 2 * (i % 2);
                const [z, x] = polar(ang, map(t, 0, 1, 5, 0));

                const modifier = map(t, 0, 1, 1, 0);
                positions.push(x + rand(-0.3 * modifier, 0.3 * modifier));
                positions.push(y + rand(-0.3 * modifier, 0.3 * modifier));
                positions.push(z + rand(-0.3 * modifier, 0.3 * modifier));

                color.setHSL(map(i, 0, totalPoints, 1.0, 0.0), 1.0, 0.5);

                colors.push(color.r, color.g, color.b);
                phases.push(rand(1000));
                sizes.push(1);
                const mIndex = map(i, 0, totalPoints, 1.0, 0.0);
                mIndexs.push(mIndex);
            }

            geometry.setAttribute(
                "position",
                new THREE.Float32BufferAttribute(positions, 3).setUsage(
                    THREE.DynamicDrawUsage));


            geometry.setAttribute("color", new THREE.Float32BufferAttribute(colors, 3));
            geometry.setAttribute("size", new THREE.Float32BufferAttribute(sizes, 1));
            geometry.setAttribute("phase", new THREE.Float32BufferAttribute(phases, 1));
            geometry.setAttribute("mIndex", new THREE.Float32BufferAttribute(mIndexs, 1));

            const tree = new THREE.Points(geometry, shaderMaterial);

            const [px, py, pz] = treePosition;

            tree.position.x = px;
            tree.position.y = py;
            tree.position.z = pz;

            scene.add(tree);
        }

        function addSnow(scene, uniforms) {
            const vertexShader = `
      attribute float size;
      attribute float phase;
      attribute float phaseSecondary;
      varying vec3 vColor;
      varying float opacity;
      uniform float time;
      uniform float step;
      float norm(float value, float min, float max ){
       return (value - min) / (max - min);
      }
      float lerp(float norm, float min, float max){
       return (max - min) * norm + min;
      }
      float map(float value, float sourceMin, float sourceMax, float destMin, float destMax){
       return lerp(norm(value, sourceMin, sourceMax), destMin, destMax);
      }
      void main() {
       float t = time* 0.0006;
       vColor = color;
       vec3 p = position;
       p.y = map(mod(phase+step, 1000.0), 0.0, 1000.0, 25.0, -8.0);
       p.x += sin(t+phase);
       p.z += sin(t+phaseSecondary);
       opacity = map(p.z, -150.0, 15.0, 0.0, 1.0);
       vec4 mvPosition = modelViewMatrix * vec4( p, 1.0 );
       gl_PointSize = size * ( 100.0 / -mvPosition.z );
       gl_Position = projectionMatrix * mvPosition;
      }
      `;

            const fragmentShader = `
      uniform sampler2D pointTexture;
      varying vec3 vColor;
      varying float opacity;
      void main() {
       gl_FragColor = vec4( vColor, opacity );
       gl_FragColor = gl_FragColor * texture2D( pointTexture, gl_PointCoord ); 
      }
      `;

            function createSnowSet(sprite) {
                const totalPoints = 300;
                const shaderMaterial = new THREE.ShaderMaterial({
                    uniforms: {
                        ...uniforms,
                        pointTexture: {
                            value: new THREE.TextureLoader().load(sprite)
                        }
                    },


                    vertexShader,
                    fragmentShader,
                    blending: THREE.AdditiveBlending,
                    depthTest: false,
                    transparent: true,
                    vertexColors: true
                });


                const geometry = new THREE.BufferGeometry();
                const positions = [];
                const colors = [];
                const sizes = [];
                const phases = [];
                const phaseSecondaries = [];

                const color = new THREE.Color();

                for (let i = 0; i < totalPoints; i++) {
                    const [x, y, z] = [rand(25, -25), 0, rand(15, -150)];
                    positions.push(x);
                    positions.push(y);
                    positions.push(z);

                    color.set(randChoise(["#f1d4d4", "#f1f6f9", "#eeeeee", "#f1f1e8"]));

                    colors.push(color.r, color.g, color.b);
                    phases.push(rand(1000));
                    phaseSecondaries.push(rand(1000));
                    sizes.push(rand(4, 2));
                }

                geometry.setAttribute(
                    "position",
                    new THREE.Float32BufferAttribute(positions, 3));

                geometry.setAttribute("color", new THREE.Float32BufferAttribute(colors, 3));
                geometry.setAttribute("size", new THREE.Float32BufferAttribute(sizes, 1));
                geometry.setAttribute("phase", new THREE.Float32BufferAttribute(phases, 1));
                geometry.setAttribute(
                    "phaseSecondary",
                    new THREE.Float32BufferAttribute(phaseSecondaries, 1));


                const mesh = new THREE.Points(geometry, shaderMaterial);

                scene.add(mesh);
            }
            const sprites = [
                "./images/snowflake1.png",
                "./images/snowflake2.png",
                "./images/snowflake3.png",
            ];

            sprites.forEach(sprite => {
                createSnowSet(sprite);
            });
        }

        function addPlane(scene, uniforms, totalPoints) {
            const vertexShader = `
      attribute float size;
      attribute vec3 customColor;
      varying vec3 vColor;
      void main() {
       vColor = customColor;
       vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
       gl_PointSize = size * ( 300.0 / -mvPosition.z );
       gl_Position = projectionMatrix * mvPosition;
      }
      `;
            const fragmentShader = `
      uniform vec3 color;
      uniform sampler2D pointTexture;
      varying vec3 vColor;
      void main() {
       gl_FragColor = vec4( vColor, 1.0 );
       gl_FragColor = gl_FragColor * texture2D( pointTexture, gl_PointCoord );
      }
      `;
            const shaderMaterial = new THREE.ShaderMaterial({
                uniforms: {
                    ...uniforms,
                    pointTexture: {
                        value: new THREE.TextureLoader().load(`/images/spark1.png`)
                    }
                },


                vertexShader,
                fragmentShader,
                blending: THREE.AdditiveBlending,
                depthTest: false,
                transparent: true,
                vertexColors: true
            });


            const geometry = new THREE.BufferGeometry();
            const positions = [];
            const colors = [];
            const sizes = [];

            const color = new THREE.Color();

            for (let i = 0; i < totalPoints; i++) {
                const [x, y, z] = [rand(-25, 25), 0, rand(-150, 15)];
                positions.push(x);
                positions.push(y);
                positions.push(z);

                color.set(randChoise(["#93abd3", "#f2f4c0", "#9ddfd3"]));

                colors.push(color.r, color.g, color.b);
                sizes.push(1);
            }

            geometry.setAttribute(
                "position",
                new THREE.Float32BufferAttribute(positions, 3).setUsage(
                    THREE.DynamicDrawUsage));


            geometry.setAttribute(
                "customColor",
                new THREE.Float32BufferAttribute(colors, 3));

            geometry.setAttribute("size", new THREE.Float32BufferAttribute(sizes, 1));

            const plane = new THREE.Points(geometry, shaderMaterial);

            plane.position.y = -8;
            scene.add(plane);
        }

        function addListners(camera, renderer, composer) {
            document.addEventListener("keydown", e => {
                const {
                    x,
                    y,
                    z
                } = camera.position;
                console.log(`camera.position.set(${x},${y},${z})`);
                const {
                    x: a,
                    y: b,
                    z: c
                } = camera.rotation;
                console.log(`camera.rotation.set(${a},${b},${c})`);
            });

            window.addEventListener(
                "resize",
                () => {
                    const width = window.innerWidth;
                    const height = window.innerHeight;

                    camera.aspect = width / height;
                    camera.updateProjectionMatrix();

                    renderer.setSize(width, height);
                    composer.setSize(width, height);
                },
                false);

        }
    </script>
</body>

</html>